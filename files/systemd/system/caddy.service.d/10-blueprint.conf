[Unit]
Description=Caddy web server (BluePrint Linux)
Documentation=https://caddyserver.com/docs/
After=network-online.target tailscaled.service caddy-setup.service
Wants=network-online.target
Requires=caddy-setup.service

[Service]
# Source the user config path set by caddy-setup.service
EnvironmentFile=/etc/default/caddy

# Restart policy for reliability
Restart=on-failure
RestartSec=5s

# Security: Allow binding to privileged ports (80, 443)
# Caddy needs this for HTTP/HTTPS
AmbientCapabilities=CAP_NET_BIND_SERVICE
